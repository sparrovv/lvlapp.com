<script> 
  window.rawTranscript = <%= raw @audio_video.transcript %>;
</script>

<div ng-app='LApp' class="span12">

  <div class="span8">

    <div data-id='video-player'>
      <video id="example_video_1" class="video-js vjs-default-skin"
      controls preload="auto" height="264" width="770"
      <%#poster="http://video-js.zencoder.com/oceans-clip.png"%>
      data-setup='{"example_option":true}'>
      <source src="<%= @audio_video.url %>" type='video/mp4' />
      </video>
    </div>

    <div id="transcript-player" data-id='text-player' ng-controller="TranscriptCtrl">
      <ul style="top:{{currentLineTopPosition}}px">
        <li ng-repeat="line in transcript">

        <p data-line-id={{line.htmlId()}} ng-controller="LineCtrl">
        <span class="word" ng-click="lookUpInDict(this)" data-word="{{word}}" ng-repeat="word in line.words()">
          <span class="raw-word" ng-bind-html-unsafe="word">&nbsp;</span>
        </span>

        </p>
        </li>
      </ul>
    </div>
  </div>

  <div id="score" class="span4" ng-controller="StatsCtrl">
    <h4>Stats</h4>
    <div>
      {{stats.allBlanks}} blank words in total
    </div>
    <div>
      {{stats.guessed}} guessed
    </div>
    <div>
      {{stats.skipped}} skipped
    </div>
  </div>

  <div id="phrase-book" ng-controller='PhrasesCtrl' class="span4">
    <h4>Phrase Book</h4>
    <ul>
      <li ng-repeat="phrase in phrases">
      <span>{{phrase.name}}</span>
      <a href="" ng-click='removePhrase()' data-phrase-id="{{phrase.id}}">x</a>
      </li>
    </ul>
  </div>
</div>
